name: PR Notification

on:
  pull_request:
    types: [opened, reopened, closed, synchronize, ready_for_review]

jobs:
  notify_discord:
    name: Notify Discord
    runs-on: ubuntu-latest
    steps:
      - name: PR Opened/Reopened/Updated Notification
        if: github.event.action == 'opened' || github.event.action == 'reopened' || github.event.action == 'synchronize'
        uses: sarisia/actions-status-discord@v1
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK }}
          title: "ğŸ”„ ìƒˆë¡œìš´ PRì´ ìƒì„±/ì—…ë°ì´íŠ¸ ë˜ì—ˆìŠµë‹ˆë‹¤"
          description: |
            PR: [#${{ github.event.pull_request.number }} ${{ github.event.pull_request.title }}](${{ github.event.pull_request.html_url }})
            ì‘ì„±ì: ${{ github.event.pull_request.user.login }}
            ë¸Œëœì¹˜: ${{ github.event.pull_request.head.ref }} â†’ ${{ github.event.pull_request.base.ref }}
            
            ${{ github.event.pull_request.body }}
          color: 0x5865F2
          
      - name: PR Merged Notification
        if: github.event.action == 'closed' && github.event.pull_request.merged == true
        uses: sarisia/actions-status-discord@v1
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK }}
          title: "âœ… PRì´ ë³‘í•©ë˜ì—ˆìŠµë‹ˆë‹¤"
          description: |
            PR: [#${{ github.event.pull_request.number }} ${{ github.event.pull_request.title }}](${{ github.event.pull_request.html_url }})
            ì‘ì„±ì: ${{ github.event.pull_request.user.login }}
            ë³‘í•©ì: ${{ github.actor }}
            ë¸Œëœì¹˜: ${{ github.event.pull_request.head.ref }} â†’ ${{ github.event.pull_request.base.ref }}
          color: 0x43B581
          
      - name: PR Closed Notification
        if: github.event.action == 'closed' && github.event.pull_request.merged == false
        uses: sarisia/actions-status-discord@v1
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK }}
          title: "âŒ PRì´ ë‹«í˜”ìŠµë‹ˆë‹¤ (ë³‘í•©ë˜ì§€ ì•ŠìŒ)"
          description: |
            PR: [#${{ github.event.pull_request.number }} ${{ github.event.pull_request.title }}](${{ github.event.pull_request.html_url }})
            ì‘ì„±ì: ${{ github.event.pull_request.user.login }}
            ë‹«ì€ ì‚¬ëŒ: ${{ github.actor }}
            ë¸Œëœì¹˜: ${{ github.event.pull_request.head.ref }} â†’ ${{ github.event.pull_request.base.ref }}
          color: 0xF04747 